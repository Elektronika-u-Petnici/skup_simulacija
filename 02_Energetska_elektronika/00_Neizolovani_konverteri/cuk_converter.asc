Version 4
SHEET 1 2552 868
WIRE 1040 -256 944 -256
WIRE 1168 -256 1040 -256
WIRE 1984 -256 1888 -256
WIRE 2112 -256 1984 -256
WIRE -432 -240 -464 -240
WIRE -336 -240 -432 -240
WIRE -176 -240 -256 -240
WIRE 32 -240 -96 -240
WIRE 128 -240 32 -240
WIRE 288 -240 192 -240
WIRE 368 -240 288 -240
WIRE 496 -240 448 -240
WIRE 640 -240 576 -240
WIRE 688 -240 640 -240
WIRE 752 -240 688 -240
WIRE 944 -208 944 -256
WIRE 1888 -208 1888 -256
WIRE 640 -192 640 -240
WIRE -704 -144 -752 -144
WIRE 32 -128 32 -240
WIRE 752 -128 752 -240
WIRE -464 -112 -464 -240
WIRE 288 -112 288 -240
WIRE 944 -112 944 -128
WIRE 1888 -112 1888 -128
WIRE -752 -80 -752 -144
WIRE 640 -64 640 -128
WIRE -176 -48 -240 -48
WIRE -16 -48 -96 -48
WIRE 1024 -32 944 -32
WIRE 1104 -32 1024 -32
WIRE 1984 -32 1888 -32
WIRE 2112 -32 1984 -32
WIRE 944 16 944 -32
WIRE 1888 16 1888 -32
WIRE -752 64 -752 0
WIRE -464 64 -464 -32
WIRE 32 64 32 -32
WIRE 288 64 288 -48
WIRE 640 64 640 16
WIRE 752 64 752 -48
WIRE 944 112 944 96
WIRE 1888 112 1888 96
FLAG -704 -144 GATE_A
IOPIN -704 -144 Out
FLAG -464 64 0
FLAG -752 64 0
FLAG -240 -48 GATE_A
IOPIN -240 -48 In
FLAG 32 64 0
FLAG 288 64 0
FLAG 640 64 0
FLAG 752 64 0
FLAG 944 -112 0
FLAG 944 112 0
FLAG 1040 -256 output_power
FLAG 1024 -32 input_power
FLAG 1888 -112 0
FLAG 1984 -256 efficiency
FLAG 1888 112 0
FLAG 1984 -32 losses
FLAG 688 -240 vout
FLAG -432 -240 vin
SYMBOL voltage -752 -96 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 139 70 Left 2
SYMATTR Value PULSE(0 10 {0} 10n 10n {d/f} {1/f})
SYMATTR InstName V2
SYMBOL voltage -464 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL cap 624 -192 R0
SYMATTR InstName C1
SYMATTR Value 22µ
SYMBOL ind2 -80 -256 R90
WINDOW 0 4 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 10µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=0.2
SYMBOL ind2 480 -224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 10µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=0.2
SYMBOL res 736 -144 R0
SYMATTR InstName R3
SYMATTR Value 50
SYMBOL res 464 -224 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 45m
SYMBOL res -352 -256 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 45m
SYMBOL res -80 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 5
SYMBOL nmos -16 -128 R0
SYMATTR InstName M2
SYMATTR Value IRFZ44N
SYMBOL cap 192 -256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 22µ
SYMBOL schottky 272 -112 R0
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 624 32 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 20m
SYMBOL bv 944 -224 R0
SYMATTR InstName B1
SYMATTR Value V= if(time >  start_time, idt(V(vout)*I(R3))/(time - start_time),0)
SYMBOL bv 944 0 R0
SYMATTR InstName B2
SYMATTR Value V=if(time > start_time, -idt(V(vin)*I(V1)) / (time - start_time),0)
SYMBOL bv 1888 -224 R0
SYMATTR InstName B3
SYMATTR Value V= min(max(V(output_power) / V(input_power),0), 1)
SYMBOL bv 1888 0 R0
SYMATTR InstName B4
SYMATTR Value V=  V(input_power) - V(output_power)
TEXT -824 -248 Left 2 !.param f = 200k
TEXT -824 -216 Left 2 !.param d=0.5
TEXT -824 -280 Left 2 !.tran 30m uic
TEXT 912 -360 Left 2 !.param start_time = 5m
